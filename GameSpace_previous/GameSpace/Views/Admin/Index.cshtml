@{
    ViewData["Title"] = "管理後台 - GameSpace";
    Layout = "_Layout";
    var stats = ViewBag.Stats as dynamic;
}

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>管理後台 - GameSpace</title>
    <style>
        :root{
            --bg:#f8fafc; --bg2:#ffffff; --ink:#1f2937; --muted:#64748b; --line:#e5e7eb;
            --surface:rgba(255,255,255,.75); --glass:rgba(255,255,255,.45);
            --accent:#3b82f6; --accent-2:#10b981; --accent-3:#f59e0b; --accent-4:#ef4444;
            --radius:12px; --radius-sm:8px; --shadow:0 4px 6px rgba(0,0,0,.1);
            --blur:8px;
        }
        *{box-sizing:border-box} html,body{height:100%}
        body{
            margin:0; color:var(--ink); font:14px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
            background:var(--bg);
        }
        .wrap{max-width:1400px; margin:0 auto; padding:20px}
        
        /* 標題 */
        .page-title{
            font-size:28px; font-weight:700; color:var(--ink); margin-bottom:30px;
            display:flex; align-items:center; gap:15px;
        }
        
        /* 統計卡片 */
        .stats-grid{
            display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-bottom:30px;
        }
        .stat-card{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            padding:24px; box-shadow:var(--shadow); position:relative; overflow:hidden;
        }
        .stat-card::before{
            content:''; position:absolute; top:0; left:0; right:0; height:4px;
            background:linear-gradient(90deg, var(--accent), var(--accent-2));
        }
        .stat-header{
            display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;
        }
        .stat-title{
            font-size:14px; font-weight:600; color:var(--muted); text-transform:uppercase;
        }
        .stat-icon{
            font-size:20px; opacity:0.7;
        }
        .stat-value{
            font-size:32px; font-weight:700; color:var(--ink); margin-bottom:5px;
        }
        .stat-change{
            font-size:12px; color:var(--accent-2); font-weight:600;
        }
        
        /* 功能卡片 */
        .features-grid{
            display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:20px; margin-bottom:30px;
        }
        .feature-card{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            padding:24px; box-shadow:var(--shadow); transition:all 0.3s ease; cursor:pointer;
        }
        .feature-card:hover{
            transform:translateY(-2px); box-shadow:0 8px 25px rgba(0,0,0,.15);
        }
        .feature-header{
            display:flex; align-items:center; gap:15px; margin-bottom:15px;
        }
        .feature-icon{
            font-size:24px; width:48px; height:48px; border-radius:var(--radius-sm);
            display:flex; align-items:center; justify-content:center; background:var(--accent);
            color:#fff;
        }
        .feature-title{
            font-size:18px; font-weight:600; color:var(--ink);
        }
        .feature-desc{
            color:var(--muted); font-size:14px; line-height:1.5;
        }
        
        /* 快速操作 */
        .quick-actions{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            padding:24px; box-shadow:var(--shadow);
        }
        .quick-actions h3{
            font-size:18px; font-weight:600; color:var(--ink); margin-bottom:20px;
        }
        .action-buttons{
            display:flex; gap:15px; flex-wrap:wrap;
        }
        .btn{
            padding:12px 24px; border:none; border-radius:var(--radius-sm); font-weight:600;
            cursor:pointer; transition:all 0.3s ease; text-decoration:none; display:inline-block;
        }
        .btn-primary{
            background:var(--accent); color:#fff;
        }
        .btn-primary:hover{background:#2563eb; transform:translateY(-1px)}
        .btn-secondary{
            background:var(--surface); color:var(--ink); border:1px solid var(--line);
        }
        .btn-secondary:hover{background:var(--line)}
        .btn-success{
            background:var(--accent-2); color:#fff;
        }
        .btn-success:hover{background:#059669; transform:translateY(-1px)}
        .btn-warning{
            background:var(--accent-3); color:#fff;
        }
        .btn-warning:hover{background:#d97706; transform:translateY(-1px)}
        .btn-danger{
            background:var(--accent-4); color:#fff;
        }
        .btn-danger:hover{background:#dc2626; transform:translateY(-1px)}
    </style>
</head>
<body>
    <div class="wrap">
        <h1 class="page-title">
            <span>🏢</span>
            管理後台
        </h1>
        
        <!-- 統計數據 -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">總用戶數</div>
                    <div class="stat-icon">👥</div>
                </div>
                <div class="stat-value">@stats.TotalUsers</div>
                <div class="stat-change">+12% 本月</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">總訂單數</div>
                    <div class="stat-icon">📦</div>
                </div>
                <div class="stat-value">@stats.TotalOrders</div>
                <div class="stat-change">+8% 本月</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">優惠券</div>
                    <div class="stat-icon">🎫</div>
                </div>
                <div class="stat-value">@stats.TotalCoupons</div>
                <div class="stat-change">+15% 本月</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">電子禮券</div>
                    <div class="stat-icon">💳</div>
                </div>
                <div class="stat-value">@stats.TotalEVouchers</div>
                <div class="stat-change">+22% 本月</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">活躍用戶</div>
                    <div class="stat-icon">🔥</div>
                </div>
                <div class="stat-value">@stats.ActiveUsers</div>
                <div class="stat-change">+5% 本月</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">待處理訂單</div>
                    <div class="stat-icon">⏳</div>
                </div>
                <div class="stat-value">@stats.PendingOrders</div>
                <div class="stat-change">需要處理</div>
            </div>
        </div>
        
        <!-- 功能模組 -->
        <div class="features-grid">
            <div class="feature-card" onclick="location.href='/Admin/Users'">
                <div class="feature-header">
                    <div class="feature-icon">👥</div>
                    <div class="feature-title">用戶管理</div>
                </div>
                <div class="feature-desc">
                    管理用戶帳號、權限、狀態，查看用戶活動記錄和統計數據
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Orders'">
                <div class="feature-header">
                    <div class="feature-icon">📦</div>
                    <div class="feature-title">訂單管理</div>
                </div>
                <div class="feature-desc">
                    處理訂單、查看訂單詳情、管理訂單狀態和物流信息
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Coupons'">
                <div class="feature-header">
                    <div class="feature-icon">🎫</div>
                    <div class="feature-title">優惠券管理</div>
                </div>
                <div class="feature-desc">
                    創建優惠券類型、發放優惠券、查看使用統計和效果分析
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/EVouchers'">
                <div class="feature-header">
                    <div class="feature-icon">💳</div>
                    <div class="feature-title">電子禮券管理</div>
                </div>
                <div class="feature-desc">
                    管理電子禮券類型、發放禮券、查看兌換記錄和統計數據
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Monitoring'">
                <div class="feature-header">
                    <div class="feature-icon">📊</div>
                    <div class="feature-title">系統監控</div>
                </div>
                <div class="feature-desc">
                    監控系統性能、查看日誌、管理系統配置和維護
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Reports'">
                <div class="feature-header">
                    <div class="feature-icon">📈</div>
                    <div class="feature-title">報表分析</div>
                </div>
                <div class="feature-desc">
                    查看業務報表、分析數據趨勢、生成統計報告
                </div>
            </div>
        </div>
        
        <!-- 快速操作 -->
        <div class="quick-actions">
            <h3>快速操作</h3>
            <div class="action-buttons">
                <a href="/Admin/Users" class="btn btn-primary">用戶管理</a>
                <a href="/Admin/Orders" class="btn btn-secondary">訂單管理</a>
                <a href="/Admin/Coupons" class="btn btn-success">優惠券管理</a>
                <a href="/Admin/EVouchers" class="btn btn-warning">電子禮券管理</a>
                <a href="/Admin/Monitoring" class="btn btn-danger">系統監控</a>
            </div>
        </div>
    </div>

    <script>
        // 定期更新統計數據
        setInterval(async function() {
            try {
                const response = await fetch('/Admin/GetUserStats');
                const stats = await response.json();
                console.log('統計數據已更新:', stats);
            } catch (error) {
                console.error('更新統計數據失敗:', error);
            }
        }, 30000); // 每30秒更新一次
    </script>
</body>
</html>