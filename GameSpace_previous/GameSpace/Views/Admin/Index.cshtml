@{
    ViewData["Title"] = "ç®¡ç†å¾Œå° - GameSpace";
    Layout = "_Layout";
    var stats = ViewBag.Stats as dynamic;
}

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ç®¡ç†å¾Œå° - GameSpace</title>
    <style>
        :root{
            --bg:#f8fafc; --bg2:#ffffff; --ink:#1f2937; --muted:#64748b; --line:#e5e7eb;
            --surface:rgba(255,255,255,.75); --glass:rgba(255,255,255,.45);
            --accent:#3b82f6; --accent-2:#10b981; --accent-3:#f59e0b; --accent-4:#ef4444;
            --radius:12px; --radius-sm:8px; --shadow:0 4px 6px rgba(0,0,0,.1);
            --blur:8px;
        }
        *{box-sizing:border-box} html,body{height:100%}
        body{
            margin:0; color:var(--ink); font:14px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
            background:var(--bg);
        }
        .wrap{max-width:1400px; margin:0 auto; padding:20px}
        
        /* æ¨™é¡Œ */
        .page-title{
            font-size:28px; font-weight:700; color:var(--ink); margin-bottom:30px;
            display:flex; align-items:center; gap:15px;
        }
        
        /* çµ±è¨ˆå¡ç‰‡ */
        .stats-grid{
            display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:20px; margin-bottom:30px;
        }
        .stat-card{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            padding:24px; box-shadow:var(--shadow); position:relative; overflow:hidden;
        }
        .stat-card::before{
            content:''; position:absolute; top:0; left:0; right:0; height:4px;
            background:linear-gradient(90deg, var(--accent), var(--accent-2));
        }
        .stat-header{
            display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;
        }
        .stat-title{
            font-size:14px; font-weight:600; color:var(--muted); text-transform:uppercase;
        }
        .stat-icon{
            font-size:20px; opacity:0.7;
        }
        .stat-value{
            font-size:32px; font-weight:700; color:var(--ink); margin-bottom:5px;
        }
        .stat-change{
            font-size:12px; color:var(--accent-2); font-weight:600;
        }
        
        /* åŠŸèƒ½å¡ç‰‡ */
        .features-grid{
            display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:20px; margin-bottom:30px;
        }
        .feature-card{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            padding:24px; box-shadow:var(--shadow); transition:all 0.3s ease; cursor:pointer;
        }
        .feature-card:hover{
            transform:translateY(-2px); box-shadow:0 8px 25px rgba(0,0,0,.15);
        }
        .feature-header{
            display:flex; align-items:center; gap:15px; margin-bottom:15px;
        }
        .feature-icon{
            font-size:24px; width:48px; height:48px; border-radius:var(--radius-sm);
            display:flex; align-items:center; justify-content:center; background:var(--accent);
            color:#fff;
        }
        .feature-title{
            font-size:18px; font-weight:600; color:var(--ink);
        }
        .feature-desc{
            color:var(--muted); font-size:14px; line-height:1.5;
        }
        
        /* å¿«é€Ÿæ“ä½œ */
        .quick-actions{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            padding:24px; box-shadow:var(--shadow);
        }
        .quick-actions h3{
            font-size:18px; font-weight:600; color:var(--ink); margin-bottom:20px;
        }
        .action-buttons{
            display:flex; gap:15px; flex-wrap:wrap;
        }
        .btn{
            padding:12px 24px; border:none; border-radius:var(--radius-sm); font-weight:600;
            cursor:pointer; transition:all 0.3s ease; text-decoration:none; display:inline-block;
        }
        .btn-primary{
            background:var(--accent); color:#fff;
        }
        .btn-primary:hover{background:#2563eb; transform:translateY(-1px)}
        .btn-secondary{
            background:var(--surface); color:var(--ink); border:1px solid var(--line);
        }
        .btn-secondary:hover{background:var(--line)}
        .btn-success{
            background:var(--accent-2); color:#fff;
        }
        .btn-success:hover{background:#059669; transform:translateY(-1px)}
        .btn-warning{
            background:var(--accent-3); color:#fff;
        }
        .btn-warning:hover{background:#d97706; transform:translateY(-1px)}
        .btn-danger{
            background:var(--accent-4); color:#fff;
        }
        .btn-danger:hover{background:#dc2626; transform:translateY(-1px)}
    </style>
</head>
<body>
    <div class="wrap">
        <h1 class="page-title">
            <span>ğŸ¢</span>
            ç®¡ç†å¾Œå°
        </h1>
        
        <!-- çµ±è¨ˆæ•¸æ“š -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">ç¸½ç”¨æˆ¶æ•¸</div>
                    <div class="stat-icon">ğŸ‘¥</div>
                </div>
                <div class="stat-value">@stats.TotalUsers</div>
                <div class="stat-change">+12% æœ¬æœˆ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">ç¸½è¨‚å–®æ•¸</div>
                    <div class="stat-icon">ğŸ“¦</div>
                </div>
                <div class="stat-value">@stats.TotalOrders</div>
                <div class="stat-change">+8% æœ¬æœˆ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">å„ªæƒ åˆ¸</div>
                    <div class="stat-icon">ğŸ«</div>
                </div>
                <div class="stat-value">@stats.TotalCoupons</div>
                <div class="stat-change">+15% æœ¬æœˆ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">é›»å­ç¦®åˆ¸</div>
                    <div class="stat-icon">ğŸ’³</div>
                </div>
                <div class="stat-value">@stats.TotalEVouchers</div>
                <div class="stat-change">+22% æœ¬æœˆ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">æ´»èºç”¨æˆ¶</div>
                    <div class="stat-icon">ğŸ”¥</div>
                </div>
                <div class="stat-value">@stats.ActiveUsers</div>
                <div class="stat-change">+5% æœ¬æœˆ</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">å¾…è™•ç†è¨‚å–®</div>
                    <div class="stat-icon">â³</div>
                </div>
                <div class="stat-value">@stats.PendingOrders</div>
                <div class="stat-change">éœ€è¦è™•ç†</div>
            </div>
        </div>
        
        <!-- åŠŸèƒ½æ¨¡çµ„ -->
        <div class="features-grid">
            <div class="feature-card" onclick="location.href='/Admin/Users'">
                <div class="feature-header">
                    <div class="feature-icon">ğŸ‘¥</div>
                    <div class="feature-title">ç”¨æˆ¶ç®¡ç†</div>
                </div>
                <div class="feature-desc">
                    ç®¡ç†ç”¨æˆ¶å¸³è™Ÿã€æ¬Šé™ã€ç‹€æ…‹ï¼ŒæŸ¥çœ‹ç”¨æˆ¶æ´»å‹•è¨˜éŒ„å’Œçµ±è¨ˆæ•¸æ“š
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Orders'">
                <div class="feature-header">
                    <div class="feature-icon">ğŸ“¦</div>
                    <div class="feature-title">è¨‚å–®ç®¡ç†</div>
                </div>
                <div class="feature-desc">
                    è™•ç†è¨‚å–®ã€æŸ¥çœ‹è¨‚å–®è©³æƒ…ã€ç®¡ç†è¨‚å–®ç‹€æ…‹å’Œç‰©æµä¿¡æ¯
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Coupons'">
                <div class="feature-header">
                    <div class="feature-icon">ğŸ«</div>
                    <div class="feature-title">å„ªæƒ åˆ¸ç®¡ç†</div>
                </div>
                <div class="feature-desc">
                    å‰µå»ºå„ªæƒ åˆ¸é¡å‹ã€ç™¼æ”¾å„ªæƒ åˆ¸ã€æŸ¥çœ‹ä½¿ç”¨çµ±è¨ˆå’Œæ•ˆæœåˆ†æ
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/EVouchers'">
                <div class="feature-header">
                    <div class="feature-icon">ğŸ’³</div>
                    <div class="feature-title">é›»å­ç¦®åˆ¸ç®¡ç†</div>
                </div>
                <div class="feature-desc">
                    ç®¡ç†é›»å­ç¦®åˆ¸é¡å‹ã€ç™¼æ”¾ç¦®åˆ¸ã€æŸ¥çœ‹å…Œæ›è¨˜éŒ„å’Œçµ±è¨ˆæ•¸æ“š
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Monitoring'">
                <div class="feature-header">
                    <div class="feature-icon">ğŸ“Š</div>
                    <div class="feature-title">ç³»çµ±ç›£æ§</div>
                </div>
                <div class="feature-desc">
                    ç›£æ§ç³»çµ±æ€§èƒ½ã€æŸ¥çœ‹æ—¥èªŒã€ç®¡ç†ç³»çµ±é…ç½®å’Œç¶­è­·
                </div>
            </div>
            
            <div class="feature-card" onclick="location.href='/Admin/Reports'">
                <div class="feature-header">
                    <div class="feature-icon">ğŸ“ˆ</div>
                    <div class="feature-title">å ±è¡¨åˆ†æ</div>
                </div>
                <div class="feature-desc">
                    æŸ¥çœ‹æ¥­å‹™å ±è¡¨ã€åˆ†ææ•¸æ“šè¶¨å‹¢ã€ç”Ÿæˆçµ±è¨ˆå ±å‘Š
                </div>
            </div>
        </div>
        
        <!-- å¿«é€Ÿæ“ä½œ -->
        <div class="quick-actions">
            <h3>å¿«é€Ÿæ“ä½œ</h3>
            <div class="action-buttons">
                <a href="/Admin/Users" class="btn btn-primary">ç”¨æˆ¶ç®¡ç†</a>
                <a href="/Admin/Orders" class="btn btn-secondary">è¨‚å–®ç®¡ç†</a>
                <a href="/Admin/Coupons" class="btn btn-success">å„ªæƒ åˆ¸ç®¡ç†</a>
                <a href="/Admin/EVouchers" class="btn btn-warning">é›»å­ç¦®åˆ¸ç®¡ç†</a>
                <a href="/Admin/Monitoring" class="btn btn-danger">ç³»çµ±ç›£æ§</a>
            </div>
        </div>
    </div>

    <script>
        // å®šæœŸæ›´æ–°çµ±è¨ˆæ•¸æ“š
        setInterval(async function() {
            try {
                const response = await fetch('/Admin/GetUserStats');
                const stats = await response.json();
                console.log('çµ±è¨ˆæ•¸æ“šå·²æ›´æ–°:', stats);
            } catch (error) {
                console.error('æ›´æ–°çµ±è¨ˆæ•¸æ“šå¤±æ•—:', error);
            }
        }, 30000); // æ¯30ç§’æ›´æ–°ä¸€æ¬¡
    </script>
</body>
</html>