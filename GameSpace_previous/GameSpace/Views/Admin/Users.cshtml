@model IEnumerable<GameSpace.Models.Users>
@{
    ViewData["Title"] = "ç”¨æˆ¶ç®¡ç† - GameSpace";
    Layout = "_Layout";
    var totalPages = (int)ViewBag.TotalPages;
    var currentPage = (int)ViewBag.CurrentPage;
}

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>ç”¨æˆ¶ç®¡ç† - GameSpace</title>
    <style>
        :root{
            --bg:#f8fafc; --bg2:#ffffff; --ink:#1f2937; --muted:#64748b; --line:#e5e7eb;
            --surface:rgba(255,255,255,.75); --glass:rgba(255,255,255,.45);
            --accent:#3b82f6; --accent-2:#10b981; --accent-3:#f59e0b; --accent-4:#ef4444;
            --radius:12px; --radius-sm:8px; --shadow:0 4px 6px rgba(0,0,0,.1);
        }
        *{box-sizing:border-box} html,body{height:100%}
        body{
            margin:0; color:var(--ink); font:14px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
            background:var(--bg);
        }
        .wrap{max-width:1400px; margin:0 auto; padding:20px}
        
        /* æ¨™é¡Œ */
        .page-title{
            font-size:28px; font-weight:700; color:var(--ink); margin-bottom:30px;
            display:flex; align-items:center; gap:15px;
        }
        
        /* æœç´¢å’Œç¯©é¸ */
        .filters{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            padding:20px; margin-bottom:20px; box-shadow:var(--shadow);
        }
        .filter-row{
            display:flex; gap:15px; align-items:center; flex-wrap:wrap;
        }
        .filter-group{
            display:flex; flex-direction:column; gap:5px;
        }
        .filter-label{
            font-size:12px; font-weight:600; color:var(--muted); text-transform:uppercase;
        }
        .filter-input{
            padding:8px 12px; border:1px solid var(--line); border-radius:var(--radius-sm);
            font-size:14px; background:var(--bg2);
        }
        .btn{
            padding:8px 16px; border:none; border-radius:var(--radius-sm); font-weight:600;
            cursor:pointer; transition:all 0.3s ease; text-decoration:none; display:inline-block;
        }
        .btn-primary{
            background:var(--accent); color:#fff;
        }
        .btn-primary:hover{background:#2563eb}
        .btn-secondary{
            background:var(--surface); color:var(--ink); border:1px solid var(--line);
        }
        .btn-secondary:hover{background:var(--line)}
        
        /* è¡¨æ ¼ */
        .table-container{
            background:var(--bg2); border:1px solid var(--line); border-radius:var(--radius);
            overflow:hidden; box-shadow:var(--shadow);
        }
        .table{
            width:100%; border-collapse:collapse; font-size:14px;
        }
        .table th{
            background:var(--surface); padding:15px; text-align:left; font-weight:600;
            color:var(--ink); border-bottom:1px solid var(--line);
        }
        .table td{
            padding:15px; border-bottom:1px solid var(--line);
        }
        .table tbody tr:hover{
            background:var(--surface);
        }
        
        /* ç‹€æ…‹æ¨™ç±¤ */
        .status-badge{
            padding:4px 8px; border-radius:12px; font-size:12px; font-weight:600;
            text-transform:uppercase;
        }
        .status-active{
            background:#dcfce7; color:#166534;
        }
        .status-banned{
            background:#fef2f2; color:#dc2626;
        }
        .status-pending{
            background:#fef3c7; color:#d97706;
        }
        
        /* åˆ†é  */
        .pagination{
            display:flex; justify-content:center; align-items:center; gap:10px;
            margin-top:20px;
        }
        .page-btn{
            padding:8px 12px; border:1px solid var(--line); border-radius:var(--radius-sm);
            background:var(--bg2); color:var(--ink); text-decoration:none; font-weight:600;
        }
        .page-btn:hover{
            background:var(--accent); color:#fff; border-color:var(--accent);
        }
        .page-btn.active{
            background:var(--accent); color:#fff; border-color:var(--accent);
        }
        .page-btn:disabled{
            opacity:0.5; cursor:not-allowed;
        }
        
        /* ç©ºç‹€æ…‹ */
        .empty-state{
            text-align:center; padding:60px 20px; color:var(--muted);
        }
        .empty-icon{font-size:48px; margin-bottom:20px}
        .empty-title{font-size:18px; font-weight:600; margin-bottom:10px; color:var(--ink)}
    </style>
</head>
<body>
    <div class="wrap">
        <h1 class="page-title">
            <span>ğŸ‘¥</span>
            ç”¨æˆ¶ç®¡ç†
        </h1>
        
        <!-- æœç´¢å’Œç¯©é¸ -->
        <div class="filters">
            <div class="filter-row">
                <div class="filter-group">
                    <div class="filter-label">æœç´¢</div>
                    <input type="text" class="filter-input" placeholder="ç”¨æˆ¶åã€éƒµç®±..." style="width:200px">
                </div>
                <div class="filter-group">
                    <div class="filter-label">ç‹€æ…‹</div>
                    <select class="filter-input" style="width:120px">
                        <option value="">å…¨éƒ¨</option>
                        <option value="active">æ´»èº</option>
                        <option value="banned">å·²å°ç¦</option>
                        <option value="pending">å¾…å¯©æ ¸</option>
                    </select>
                </div>
                <div class="filter-group">
                    <div class="filter-label">è¨»å†Šæ™‚é–“</div>
                    <input type="date" class="filter-input" style="width:150px">
                </div>
                <button class="btn btn-primary">æœç´¢</button>
                <button class="btn btn-secondary">é‡ç½®</button>
            </div>
        </div>
        
        <!-- ç”¨æˆ¶è¡¨æ ¼ -->
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>ç”¨æˆ¶ID</th>
                        <th>ç”¨æˆ¶å</th>
                        <th>éƒµç®±</th>
                        <th>è¨»å†Šæ™‚é–“</th>
                        <th>æœ€å¾Œç™»å…¥</th>
                        <th>ç‹€æ…‹</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Any())
                    {
                        @foreach (var user in Model)
                        {
                            <tr>
                                <td>@user.UserId</td>
                                <td>@user.Username</td>
                                <td>@user.Email</td>
                                <td>@user.CreatedAt.ToString("yyyy/MM/dd HH:mm")</td>
                                <td>@(user.LastLoginTime?.ToString("yyyy/MM/dd HH:mm") ?? "å¾æœªç™»å…¥")</td>
                                <td>
                                    @if (user.IsBanned)
                                    {
                                        <span class="status-badge status-banned">å·²å°ç¦</span>
                                    }
                                    else if (user.EmailConfirmed)
                                    {
                                        <span class="status-badge status-active">æ´»èº</span>
                                    }
                                    else
                                    {
                                        <span class="status-badge status-pending">å¾…é©—è­‰</span>
                                    }
                                </td>
                                <td>
                                    <button class="btn btn-secondary" onclick="viewUser(@user.UserId)">æŸ¥çœ‹</button>
                                    <button class="btn btn-primary" onclick="editUser(@user.UserId)">ç·¨è¼¯</button>
                                    @if (user.IsBanned)
                                    {
                                        <button class="btn btn-success" onclick="unbanUser(@user.UserId)">è§£å°</button>
                                    }
                                    else
                                    {
                                        <button class="btn btn-danger" onclick="banUser(@user.UserId)">å°ç¦</button>
                                    }
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="7" class="empty-state">
                                <div class="empty-icon">ğŸ‘¥</div>
                                <div class="empty-title">æš«ç„¡ç”¨æˆ¶æ•¸æ“š</div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
        
        <!-- åˆ†é  -->
        @if (totalPages > 1)
        {
            <div class="pagination">
                @if (currentPage > 1)
                {
                    <a href="?page=@(currentPage - 1)" class="page-btn">ä¸Šä¸€é </a>
                }
                
                @for (int i = Math.Max(1, currentPage - 2); i <= Math.Min(totalPages, currentPage + 2); i++)
                {
                    <a href="?page=@i" class="page-btn @(i == currentPage ? "active" : "")">@i</a>
                }
                
                @if (currentPage < totalPages)
                {
                    <a href="?page=@(currentPage + 1)" class="page-btn">ä¸‹ä¸€é </a>
                }
            </div>
        }
    </div>

    <script>
        function viewUser(userId) {
            alert('æŸ¥çœ‹ç”¨æˆ¶ ' + userId + ' çš„è©³ç´°ä¿¡æ¯');
        }
        
        function editUser(userId) {
            alert('ç·¨è¼¯ç”¨æˆ¶ ' + userId);
        }
        
        function banUser(userId) {
            if (confirm('ç¢ºå®šè¦å°ç¦ç”¨æˆ¶ ' + userId + ' å—ï¼Ÿ')) {
                alert('ç”¨æˆ¶ ' + userId + ' å·²è¢«å°ç¦');
            }
        }
        
        function unbanUser(userId) {
            if (confirm('ç¢ºå®šè¦è§£å°ç”¨æˆ¶ ' + userId + ' å—ï¼Ÿ')) {
                alert('ç”¨æˆ¶ ' + userId + ' å·²è¢«è§£å°');
            }
        }
    </script>
</body>
</html>