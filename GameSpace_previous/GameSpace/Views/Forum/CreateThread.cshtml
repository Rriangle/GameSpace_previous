@model CreateThreadViewModel
@{
    ViewData["Title"] = "發起討論 - " + ViewBag.Forum.ForumName;
    Layout = "_Layout";
    var forum = ViewBag.Forum as Forum;
}

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>發起討論 - @forum.ForumName</title>
    <style>
        :root{
            --bg:#eef3f8; --bg2:#ffffff; --ink:#1f2937; --muted:#64748b; --line:#e5e7eb;
            --surface:rgba(255,255,255,.75); --glass:rgba(255,255,255,.45);
            --accent:#7557ff; --accent-2:#34d2ff; --accent-3:#22c55e;
            --radius:18px; --radius-sm:12px; --shadow:0 18px 40px rgba(17,24,39,.12);
            --blur:14px;
        }
        body.dark{
            --bg:#0c111b; --bg2:#0a0f18; --ink:#e5edff; --muted:#9fb1c9; --line:#1e2b43;
            --surface:rgba(22,30,48,.65); --glass:rgba(18,24,39,.50);
            --shadow:0 18px 42px rgba(0,0,0,.35);
        }
        *{box-sizing:border-box} html,body{height:100%}
        body{
            margin:0; color:var(--ink); font:16px/1.65 system-ui,-apple-system,"Segoe UI",Roboto,"Noto Sans TC","PingFang TC","Microsoft JhengHei",sans-serif;
            background:
                radial-gradient(900px 500px at -10% -10%, rgba(117,87,255,.10), transparent 60%),
                radial-gradient(800px 460px at 110% 10%, rgba(52,210,255,.10), transparent 50%),
                linear-gradient(180deg, var(--bg), var(--bg2));
        }
        .wrap{max-width:800px; margin:0 auto; padding:0 16px}
        
        /* 表單容器 */
        .form-container{
            background:var(--glass); border:1px solid var(--line); border-radius:20px; 
            padding:40px; backdrop-filter:blur(var(--blur)); box-shadow:var(--shadow);
            margin:30px 0;
        }
        .form-title{font-size:28px; font-weight:900; color:var(--ink); margin-bottom:10px}
        .form-subtitle{color:var(--muted); margin-bottom:30px; font-size:16px}
        
        .form-group{margin-bottom:25px}
        .form-label{display:block; font-weight:700; color:var(--ink); margin-bottom:8px; font-size:16px}
        .form-control{
            width:100%; padding:15px 20px; border:2px solid var(--line); border-radius:12px;
            background:var(--surface); color:var(--ink); font-size:16px; resize:vertical;
            transition:border-color 0.3s ease; font-family:inherit;
        }
        .form-control:focus{outline:none; border-color:var(--accent); box-shadow:0 0 0 3px rgba(117,87,255,0.1)}
        .form-control::placeholder{color:var(--muted)}
        
        .btn-group{display:flex; gap:15px; justify-content:flex-end; margin-top:30px}
        .btn{
            padding:15px 30px; border:none; border-radius:12px; font-weight:700; cursor:pointer;
            transition:all 0.3s ease; font-size:16px;
        }
        .btn-primary{
            background:linear-gradient(135deg,var(--accent),#3b82f6); color:#fff;
            box-shadow:var(--shadow);
        }
        .btn-primary:hover{transform:translateY(-2px); box-shadow:0 8px 25px rgba(117,87,255,0.4)}
        .btn-secondary{
            background:var(--surface); color:var(--ink); border:2px solid var(--line);
        }
        .btn-secondary:hover{background:var(--line)}
        
        .validation-summary{background:#fee; border:1px solid #fcc; border-radius:8px; padding:15px; margin-bottom:20px; color:#c33}
        .field-validation-error{color:#c33; font-size:14px; margin-top:5px}
    </style>
</head>
<body>
    <div class="wrap">
        <div class="form-container">
            <h1 class="form-title">✍️ 發起討論</h1>
            <p class="form-subtitle">在 <strong>@forum.ForumName</strong> 中發表您的想法</p>
            
            <form asp-action="CreateThread" method="post">
                <input type="hidden" asp-for="ForumId" value="@forum.ForumId" />
                
                <div asp-validation-summary="ModelOnly" class="validation-summary"></div>
                
                <div class="form-group">
                    <label asp-for="Title" class="form-label">討論標題</label>
                    <input asp-for="Title" class="form-control" placeholder="請輸入一個吸引人的標題..." />
                    <span asp-validation-for="Title" class="field-validation-error"></span>
                </div>
                
                <div class="form-group">
                    <label asp-for="Content" class="form-label">討論內容</label>
                    <textarea asp-for="Content" class="form-control" rows="10" placeholder="請詳細描述您的想法、問題或分享的內容..."></textarea>
                    <span asp-validation-for="Content" class="field-validation-error"></span>
                </div>
                
                <div class="btn-group">
                    <a href="/Forum/Threads/@forum.ForumId" class="btn btn-secondary">取消</a>
                    <button type="submit" class="btn btn-primary">發表討論</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // 添加請求驗證令牌
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.createElement('form');
            form.style.display = 'none';
            form.innerHTML = '@Html.AntiForgeryToken()';
            document.body.appendChild(form);
        });
    </script>
</body>
</html>